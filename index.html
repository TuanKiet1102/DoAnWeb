<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WebPhong ‚Äî H·ªá th·ªëng cho thu√™ ph√≤ng tr·ªç</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./CSS/index.css">
  <!-- Select2 CSS (searchable select) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
</head>
<body>

  <!-- Header -->
  <header class="header">
    <div class="container header-wrapper">
      <div class="logo-section">
        <img src="./IMG/logo.jpg" alt="Logo WebPhong" class="logo-img">
        <h1 class="logo-text">WebPhong</h1>
      </div>

      <nav class="nav-menu">
        <a href="#home">Trang ch·ªß</a>
        <a href="#search-section">T√¨m ph√≤ng</a>
        <a href="#featured">Ph√≤ng n·ªïi b·∫≠t</a>
        <a href="#contact">Li√™n h·ªá</a>
      </nav>

      <div class="auth-buttons">
        <button class="btn btn-secondary" onclick="location.href='./DangNhap.html'">ƒêƒÉng nh·∫≠p</button>
        <button class="btn btn-primary"onclick="location.href='./DangKy.html'">ƒêƒÉng k√Ω</button>
      </div>
    </div>
  </header>

  <!--Banner-->
  <section id="home" class="hero">
    <div class="hero-content">
      <h2>T√¨m ph√≤ng tr·ªç nhanh ch√≥ng & d·ªÖ d√†ng</h2>
      <p>K·∫øt n·ªëi b·∫°n v·ªõi h√†ng ng√†n ph√≤ng tr·ªç ch·∫•t l∆∞·ª£ng tr√™n to√†n th√†nh ph·ªë</p>
      <button class="btn btn-primary btn-large" onclick="scrollTo('search-section')">B·∫Øt ƒë·∫ßu t√¨m ki·∫øm</button>
    </div>
  </section>

  <!-- T√¨m ki·∫øm-->
  <section id="search-section" class="search-section">
    <div class="container">
      <h3>T√¨m ph√≤ng tr·ªç c·ªßa b·∫°n</h3>
      
      <form id="search-form" class="search-form" action="#" method="GET">
        <div class="form-group">
          <label for="location">ƒê·ªãa ƒëi·ªÉm:</label>
          <select id="location" name="location">
            <option value="">-- Ch·ªçn qu·∫≠n --</option>
            <option value="1">Qu·∫≠n 1</option>
            <option value="2">Qu·∫≠n 2</option>
            <option value="3">Qu·∫≠n 3</option>
            <option value="4">Qu·∫≠n 4</option>
            <option value="5">Qu·∫≠n 5</option>
            <option value="6">Qu·∫≠n 6</option>
            <option value="7">Qu·∫≠n 7</option>
            <option value="8">Qu·∫≠n 8</option>
            <option value="9">Qu·∫≠n 9</option>
            <option value="10">Qu·∫≠n 10</option>
            <option value="11">Qu·∫≠n 11</option>
            <option value="12">Qu·∫≠n 12</option>
          </select>
        </div>

        <div class="form-group">
          <label for="price-min">Gi√° t·ª´ (tri·ªáu VNƒê):</label>
          <input type="number" id="price-min" name="price_min" placeholder="V√≠ d·ª•: 1" min="0" step="0.1">
        </div>

        <div class="form-group">
          <label for="price-max">Gi√° ƒë·∫øn (tri·ªáu VNƒê):</label>
          <input type="number" id="price-max" name="price_max" placeholder="V√≠ d·ª•: 4" min="0" step="0.1">
        </div>

        <div class="form-group">
          <label for="area">Di·ªán t√≠ch:</label>
          <select id="area" name="area">
            <option value="">-- T·∫•t c·∫£ --</option>
            <option value="20">D∆∞·ªõi 20 m¬≤</option>
            <option value="50">20 - 50 m¬≤</option>
            <option value="100">50 - 100 m¬≤</option>
            <option value="1000">Tr√™n 100 m¬≤</option>
          </select>
        </div>

        <div class="form-group">
          <label>Ti·ªán nghi:</label>
          <div class="amenities-group">
            <label><input type="checkbox" name="amenities" value="Wifi"> Wifi</label>
            <label><input type="checkbox" name="amenities" value="MayGiat"> M√°y gi·∫∑t</label>
            <label><input type="checkbox" name="amenities" value="DieuHoa"> ƒêi·ªÅu h√≤a</label>
          </div>
        </div>

        <button type="submit" class="btn btn-primary">T√¨m ki·∫øm</button>
      </form>
    </div>
  </section>

  <!-- N·ªïi b·∫≠t -->
  <section id="featured" class="featured-rooms">
    <div class="container">
      <h3>Ph√≤ng n·ªïi b·∫≠t</h3>
      <div id="featured-rooms-grid" class="rooms-grid">
        <!-- Ph√≤ng s·∫Ω ƒë∆∞·ª£c inject ƒë·ªông t·ª´ JavaScript -->
      </div>
    </div>
  </section>

  <!-- Li√™n h·ªá -->
  <section id="contact" class="contact-section">
    <div class="container">
      <h3>Li√™n h·ªá</h3>
      <div class="contact-wrapper">
        <div class="contact-info">
          <h4>Th√¥ng tin li√™n h·ªá</h4>
          <p><strong>Email:</strong> support@webphong.com</p>
          <p><strong>ƒêi·ªán tho·∫°i:</strong> 0123 456 789</p>
          <p><strong>Zalo:</strong> 0123 456 789</p>
          <p><strong>ƒê·ªãa ch·ªâ:</strong> 123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP.HCM</p>
        </div>

        <form class="contact-form" action="contact.php" method="POST">
          <h4>G·ª≠i tin nh·∫Øn cho ch√∫ng t√¥i</h4>
          <div class="form-group">
            <input type="text" name="fullname" placeholder="H·ªç t√™n ƒë·∫ßy ƒë·ªß" required>
          </div>
          <div class="form-group">
            <input type="email" name="email" placeholder="Email c·ªßa b·∫°n" required>
          </div>
          <div class="form-group">
            <input type="tel" name="phone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
          </div>
          <div class="form-group">
            <textarea name="message" rows="5" placeholder="N·ªôi dung tin nh·∫Øn" required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">G·ª≠i</button>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-col">
          <h5>V·ªÅ WebPhong</h5>
          <p>H·ªá th·ªëng gi·ªõi thi·ªáu v√† cho thu√™ ph√≤ng tr·ªç, nh√† ·ªü tr·ª±c tuy·∫øn to√†n di·ªán.</p>
        </div>
        <div class="footer-col">
          <h5>Menu</h5>
          <ul>
            <li><a href="#home">Trang ch·ªß</a></li>
            <li><a href="#search-section">T√¨m ph√≤ng</a></li>
            <li><a href="#featured">Ph√≤ng n·ªïi b·∫≠t</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h5>H·ªó tr·ª£</h5>
          <ul>
            <li><a href="#">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</a></li>
            <li><a href="#">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</a></li>
            <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h5>K·∫øt n·ªëi</h5>
          <ul>
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Instagram</a></li>
            <li><a href="#">Zalo</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 WebPhong. H·ªá th·ªëng d√†nh cho sinh vi√™n t·∫≠p l√†m. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
      </div>
    </div>
  </footer>
  <!-- jQuery + Select2 JS for searchable district dropdown -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script>
    (function() {
      if (window.jQuery && $.fn && $.fn.select2) {
        $(document).ready(function() {
          $('#location').select2({
            placeholder: '-- Ch·ªçn qu·∫≠n --',
            allowClear: true,
            width: '100%'
          });
        });
      }
    })();
  </script>
  <script>
    // Provide viewDetail globally for featured cards on index
    window.viewDetail = function(id){
      window.location.href = 'room.html?id=' + encodeURIComponent(id);
    };
    window.contact = function(id){
      // Scroll to contact section
      var contactSection = document.getElementById('contact');
      if (contactSection) {
        contactSection.scrollIntoView({ behavior: 'smooth' });
      }
    };
    window.toggleFavorite = function(btn){
      btn.classList.toggle('liked');
      btn.textContent = btn.classList.contains('liked') ? '‚ô•' : '‚ô°';
    };
  </script>
  <script>
    // Load featured rooms randomly from rooms.json or embedded data
    var embeddedRooms = [
      {"id":101,"title":"Ph√≤ng tr·ªç trung t√¢m Qu·∫≠n 1","district_id":1,"district_name":"Qu·∫≠n 1","meta":"Qu·∫≠n 1, TP.HCM","area":"28 m¬≤","area_m2":28,"price":"3.000.000 ƒë/th√°ng","price_vnd":3000000,"amenities":["Wifi"],"desc":"Ph√≤ng s·∫°ch, g·∫ßn ch·ª£ B·∫øn Th√†nh, ti·ªán ƒëi l·∫°i.","image":"https://via.placeholder.com/400x300?text=Q1-1"},
      {"id":102,"title":"CƒÉn h·ªô mini Qu·∫≠n 1","district_id":1,"district_name":"Qu·∫≠n 1","meta":"Qu·∫≠n 1, TP.HCM","area":"35 m¬≤","area_m2":35,"price":"4.200.000 ƒë/th√°ng","price_vnd":4200000,"amenities":["Wifi","DieuHoa"],"desc":"Full n·ªôi th·∫•t, an ninh 24/7.","image":"https://via.placeholder.com/400x300?text=Q1-2"},
      {"id":201,"title":"Ph√≤ng tr·ªç g·∫ßn ch·ª£ Qu·∫≠n 2","district_id":2,"district_name":"Qu·∫≠n 2","meta":"Qu·∫≠n 2, TP.HCM","area":"22 m¬≤","area_m2":22,"price":"2.800.000 ƒë/th√°ng","price_vnd":2800000,"amenities":["Wifi"],"desc":"G·∫ßn c·∫ßu Th·ªß Thi√™m, khu y√™n tƒ©nh.","image":"https://via.placeholder.com/400x300?text=Q2-1"},
      {"id":301,"title":"Ph√≤ng ti·ªán nghi Qu·∫≠n 3","district_id":3,"district_name":"Qu·∫≠n 3","meta":"Qu·∫≠n 3, TP.HCM","area":"30 m¬≤","area_m2":30,"price":"3.500.000 ƒë/th√°ng","price_vnd":3500000,"amenities":["Wifi","MayGiat","DieuHoa"],"desc":"G·∫ßn trung t√¢m, c√≥ ƒëi·ªÅu h√≤a.","image":"https://via.placeholder.com/400x300?text=Q3-1"},
      {"id":401,"title":"Ph√≤ng gi√° r·∫ª Qu·∫≠n 4","district_id":4,"district_name":"Qu·∫≠n 4","meta":"Qu·∫≠n 4, TP.HCM","area":"18 m¬≤","area_m2":18,"price":"1.800.000 ƒë/th√°ng","price_vnd":1800000,"amenities":[],"desc":"Ph√π h·ª£p sinh vi√™n, g·∫ßn tr∆∞·ªùng.","image":"https://via.placeholder.com/400x300?text=Q4-1"},
      {"id":501,"title":"Ph√≤ng tr·ªç Qu·∫≠n 5 g·∫ßn ƒêH","district_id":5,"district_name":"Qu·∫≠n 5","meta":"Qu·∫≠n 5, TP.HCM","area":"25 m¬≤","area_m2":25,"price":"2.500.000 ƒë/th√°ng","price_vnd":2500000,"amenities":["Wifi"],"desc":"G·∫ßn tr∆∞·ªùng, wifi mi·ªÖn ph√≠.","image":"https://via.placeholder.com/400x300?text=Q5-1"},
      {"id":601,"title":"Nh√† tr·ªç Qu·∫≠n 6","district_id":6,"district_name":"Qu·∫≠n 6","meta":"Qu·∫≠n 6, TP.HCM","area":"27 m¬≤","area_m2":27,"price":"2.200.000 ƒë/th√°ng","price_vnd":2200000,"amenities":["MayGiat"],"desc":"Khu d√¢n c∆∞, c√≥ ch·ªó ƒë·ªÉ xe.","image":"https://via.placeholder.com/400x300?text=Q6-1"},
      {"id":701,"title":"CƒÉn h·ªô mini Qu·∫≠n 7","district_id":7,"district_name":"Qu·∫≠n 7","meta":"Qu·∫≠n 7, TP.HCM","area":"30 m¬≤","area_m2":30,"price":"3.200.000 ƒë/th√°ng","price_vnd":3200000,"amenities":["Wifi","DieuHoa"],"desc":"An ninh, g·∫ßn trung t√¢m th∆∞∆°ng m·∫°i.","image":"https://via.placeholder.com/400x300?text=Q7-1"},
      {"id":801,"title":"Ph√≤ng tr·ªç Qu·∫≠n 8","district_id":8,"district_name":"Qu·∫≠n 8","meta":"Qu·∫≠n 8, TP.HCM","area":"20 m¬≤","area_m2":20,"price":"1.900.000 ƒë/th√°ng","price_vnd":1900000,"amenities":["Wifi"],"desc":"Ti·ªán l·ª£i, g·∫ßn ch·ª£.","image":"https://via.placeholder.com/400x300?text=Q8-1"},
      {"id":901,"title":"Ph√≤ng Qu·∫≠n 9 m·ªõi","district_id":9,"district_name":"Qu·∫≠n 9","meta":"Qu·∫≠n 9, TP.HCM","area":"26 m¬≤","area_m2":26,"price":"2.700.000 ƒë/th√°ng","price_vnd":2700000,"amenities":["DieuHoa"],"desc":"G·∫ßn khu c√¥ng ngh·ªá cao, y√™n tƒ©nh.","image":"https://via.placeholder.com/400x300?text=Q9-1"},
      {"id":1001,"title":"Ph√≤ng Qu·∫≠n 10 ti·ªán nghi","district_id":10,"district_name":"Qu·∫≠n 10","meta":"Qu·∫≠n 10, TP.HCM","area":"29 m¬≤","area_m2":29,"price":"3.100.000 ƒë/th√°ng","price_vnd":3100000,"amenities":["MayGiat","Wifi"],"desc":"G·∫ßn b·ªánh vi·ªán v√† ch·ª£ l·ªõn.","image":"https://via.placeholder.com/400x300?text=Q10-1"},
      {"id":1101,"title":"Ph√≤ng Qu·∫≠n 11 gi√° t·ªët","district_id":11,"district_name":"Qu·∫≠n 11","meta":"Qu·∫≠n 11, TP.HCM","area":"24 m¬≤","area_m2":24,"price":"2.000.000 ƒë/th√°ng","price_vnd":2000000,"amenities":[],"desc":"G·∫ßn tr∆∞·ªùng h·ªçc v√† tuy·∫øn xe bus.","image":"https://via.placeholder.com/400x300?text=Q11-1"},
      {"id":1201,"title":"Ph√≤ng Qu·∫≠n 12 cho sinh vi√™n","district_id":12,"district_name":"Qu·∫≠n 12","meta":"Qu·∫≠n 12, TP.HCM","area":"21 m¬≤","area_m2":21,"price":"1.700.000 ƒë/th√°ng","price_vnd":1700000,"amenities":[],"desc":"Gi√° r·∫ª, ph√π h·ª£p sinh vi√™n.","image":"https://via.placeholder.com/400x300?text=Q12-1"}
    ];

    function getRandomRooms(list, count) {
      var shuffled = list.slice().sort(function() { return Math.random() - 0.5; });
      return shuffled.slice(0, count);
    }

    function renderFeaturedRooms(rooms) {
      var container = document.getElementById('featured-rooms-grid');
      if (!container) return;
      container.innerHTML = '';
      rooms.forEach(function(r){
        var amenitiesHtml = (r.amenities || []).map(function(a){
          var amenText = a === 'Wifi' ? 'Wifi' : a === 'MayGiat' ? 'M√°y gi·∫∑t' : a === 'DieuHoa' ? 'ƒêi·ªÅu h√≤a' : a;
          return '<span class="amenity">‚úì ' + amenText + '</span>';
        }).join(' ');
        
        var card = document.createElement('div');
        card.className = 'room-card';
        card.innerHTML = `
          <div class="room-image">
            <img src="${r.image}" alt="${r.title}">
            <span class="status-badge">C√≤n tr·ªëng</span>
            <button class="btn-favorite" onclick="toggleFavorite(this)" title="L∆∞u y√™u th√≠ch">‚ô°</button>
          </div>
          <div class="room-info">
            <h4>${r.title}</h4>
            <div class="room-meta">
              <span>üìç ${r.meta}</span>
              <span>üìê ${r.area}</span>
            </div>
            <p class="room-description">${r.desc}</p>
            <div class="room-amenities">${amenitiesHtml}</div>
            <div class="room-footer">
              <p class="room-price">${r.price}</p>
              <div class="room-actions">
                <button class="btn btn-secondary" onclick="viewDetail(${r.id})">Xem chi ti·∫øt</button>
                <button class="btn btn-primary" onclick="contact(${r.id})">Li√™n h·ªá</button>
              </div>
            </div>
          </div>
        `;
        container.appendChild(card);
      });
    }

    (function(){
      fetch('rooms.json')
        .then(function(resp){ if(!resp.ok) throw new Error('err'); return resp.json(); })
        .then(function(data){
          var featured = getRandomRooms(data, 6);
          renderFeaturedRooms(featured);
        })
        .catch(function(){
          // fallback to embedded
          var featured = getRandomRooms(embeddedRooms, 6);
          renderFeaturedRooms(featured);
        });
    })();
  </script>
  <script>
    // Intercept search form and redirect to district.html with selected filters
    (function() {
      var form = document.getElementById('search-form');
      if (!form) return;
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        var sel = document.getElementById('location');
        var val = sel ? (sel.value || '') : '';
        var priceMin = document.getElementById('price-min').value;
        var priceMax = document.getElementById('price-max').value;
        var area = document.getElementById('area').value; // this select uses values like 20,50,100,1000

        // collect selected amenities
        var amenNodes = document.querySelectorAll('input[name="amenities"]:checked');
        var amenities = Array.prototype.slice.call(amenNodes).map(function(n){ return n.value; });

        // Build query string params helper
        function addParam(arr, key, value) {
          if (value === undefined || value === null || value === '') return;
          arr.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));
        }

        // If the user selected a district explicitly, go to district page for that district (preserve filters)
        if (val && /^\d+$/.test(val)) {
          var qs = [];
          addParam(qs, 'id', val);
          addParam(qs, 'min', priceMin);
          addParam(qs, 'max', priceMax);
          addParam(qs, 'area', area);
          if (amenities.length) addParam(qs, 'amenities', amenities.join(','));
          window.location.href = 'district.html' + (qs.length ? ('?' + qs.join('&')) : '');
          return;
        }

        // If user entered price or selected area or amenities but did NOT choose a district, redirect to district.html with params
        if ((priceMin && priceMin !== '') || (priceMax && priceMax !== '') || (area && area !== '') || amenities.length) {
          var qs = [];
          addParam(qs, 'min', priceMin);
          addParam(qs, 'max', priceMax);
          addParam(qs, 'area', area);
          if (amenities.length) addParam(qs, 'amenities', amenities.join(','));
          window.location.href = 'district.html' + (qs.length? ('?' + qs.join('&')) : '');
          return;
        }

        // If nothing provided, ask user to choose at least one filter
        alert('Vui l√≤ng ch·ªçn qu·∫≠n ho·∫∑c nh·∫≠p kho·∫£ng gi√° / di·ªán t√≠ch / ti·ªán nghi ƒë·ªÉ t√¨m ki·∫øm.');
      });
    })();
  </script>
</body>
</html>
